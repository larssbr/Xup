<h1>Listing parties</h1>

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Owner</th>
        <th>Date</th>
        <th>Start Time</th>
        <th>Location</th>
        <th>Description</th>
        <th>Participants</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @parties.each do |party| %>
        <tr>
          <td><%= party.name %></td>
          <%# <td><%= party.owner %1></td> %>
          <td><%= link_to party.owner, profile_path(User.find_by_name(party.owner).profile.id) %></td>
          <%# <td><%= party.date.strftime("%Y-%m-%d") %1></td> %>
          <td><%= party.date.strftime("%Y-%m-%d") %></td>
          <td><%= party.time.strftime("%H:%M") %></td>
          <%# <td><%= party.time %1></td> %>
          <td><%= party.location %></td>
          <td><%= party.description %></td>
          <td><%= User.find(party.participants).name %></td>
          <td><%= link_to 'Show', party, class: 'btn btn-info btn-sm' %></td>
          <% if user_signed_in? %>
              <% if party.owner == current_user.name %>
                  <td><%= link_to 'Edit', edit_party_path(party), class: 'btn btn-warning btn-sm' %></td>
                  <td><%= link_to 'Destroy', party, class: 'btn btn-danger btn-sm', method: :delete, data: { confirm: 'Are you sure?' } %></td>
              <% else %>
                  <td><%= button_to 'Join', join_members_path(user_id: current_user.id, party_id: party.id), class: 'btn btn-warning btn-sm' %></td>
              <% end %>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<br>

<%= link_to 'New Party', new_party_path, class: 'btn btn-success btn-sm' %>
